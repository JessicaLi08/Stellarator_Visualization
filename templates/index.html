<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stellarator visualization</title>
  <!--code in the line below is chatgpt-->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
    }
  }
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: rgba(255, 0, 0, 0.877);
      min-height: 100vh;
      padding: 20px;
    }
    
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      text-align: center;
    }
    
    .header-section {
      margin-bottom: 40px;
    }
    
    .title {
      font-size: 2.5em;
      color: black;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .description {
      font-size: 1.1em;
      color: black;
    }
    
    .section {
      margin-bottom: 40px;
    }
    
    .section-title {
      font-size: 1.5em;
      color: black;
      margin-bottom: 20px;
      font-weight: 600;
      border-bottom: 3px solid #667eea;
      padding-bottom: 8px;
      display: inline-block;
    }
    
    .three-column-layout {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 30px;
      margin-top: 20px;
    }
    
    .column {
      background: #f7fafc;
      border-radius: 12px;
      padding: 20px;
      border: 2px solid #e2e8f0;
    }
    
    .column-title {
      font-size: 1.2em;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 15px;
    }
    
    .interactive-element {
      margin: 10px 0;
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: rgba(255, 0, 0, 0.877);
      color: white;
      width: 100%;
    }
    
    .custom-input {
      margin: 10px 0;
      padding: 10px;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      font-size: 14px;
      width: 100%;
    }
    
    #vmecDropZone {
      width: 100%;
      height: 200px;
      border: 2px dashed #cbd5e0;
      border-radius: 8px;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      flex-direction: column;
      gap: 10px;
    }
    
    #vmecFileInput {
      display: none;
    }
    
    .drop-text {
      font-size: 16px;
      color: black;
      font-weight: 600;
    }
    
    .colorbar {
      margin: 30px 0;
      width: 100%;
    }
    
    .colorbar-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .colorbar-title {
      font-weight: 700;
      font-size: 1.1em;
      color: black;
    }
    
    #colormapSelect {
      padding: 8px 12px;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      font-size: 14px;
      background: white;
      cursor: pointer;
    }
    
    .colorbar-gradient {
      width: 100%;
      height: 20px;
      background: linear-gradient(to right, 
        rgb(0,0,255) 0%, 
        rgb(100,100,255) 25%, 
        rgb(255,255,255) 50%, 
        rgb(255,100,100) 75%, 
        rgb(255,0,0) 100%);
      border: 2px solid #2d3748;
      margin: 0 auto;
    }
    
    .colorbar-labels {
      width: 100%;
      margin: 10px auto;
      display: flex;
      justify-content: space-between;
      font-weight: 600;
      color: black;
    }
    
    .generate-plot-btn {
      margin: 70px 0;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      background: rgba(255, 0, 0, 0.877);
      color: white;
    }
    
    table {
      border-collapse: collapse;
      margin: 15px auto;
      width: 100%;
      height: 100%;
      border-radius: 8px;
    }
    
    td {
      padding: 1px;
      border: 1px solid #e2e8f0;
    }   
    
    input[type="range"] {
      width: 200px;
      margin-right: 10px;
    }
    
    #tablesContainer {
      margin-top: 20px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    #tables2DContainer {
      margin-top: 40px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .table-2d {
      border-collapse: collapse;
      margin: 15px auto;
      width: 100%;
      font-size: 12px;
    }
    
    .table-2d th {
      background: #e2e8f0;
      padding: 8px;
      border: 1px solid #cbd5e0;
      font-weight: 700;
    }
    
    .table-2d td {
      padding: 8px;
      border: 1px solid #e2e8f0;
      text-align: center;
      font-family: monospace;
    }
    
    .visualization-container {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
    }

  </style>
</head>
<body>
  <div class="main-container">
    
    <div class="header-section">
      <div class="title">stellarator visualization</div>
      <div class="description">interactive 2d fourier mode analysis and 3d rendering</div>
    </div>
    
    <div class="section">
      <div class="section-title">parameter input options</div>
      
      <div class="three-column-layout">
        
        <div class="column">
          <div class="column-title">load preset</div>
          <button class="interactive-element preset-btn" data-preset="w7x">w7-x</button>
          <button class="interactive-element preset-btn" data-preset="qa_reactorscale">qa_reactorscale</button>
          <button class="interactive-element preset-btn" data-preset="qh_reactorscale">qh_reactorscale</button>
        </div>
        
        <div class="column">
          <div class="column-title">upload vmec file</div>
          <input type="file" id="vmecFileInput" accept=".txt,*" />
          <div id="vmecDropZone">
            <div class="drop-text">drop VMEC file here or click to browse</div>
          </div>
        </div>
        
        <div class="column">
          <div class="column-title">custom values</div>
          nfp: <input type="number" id="nfpInput" class="custom-input" placeholder="nfp" value="1" />
          n: <input type="number" id="nInput" class="custom-input" placeholder="n" value="1" />
          m: <input type="number" id="mInput" class="custom-input" placeholder="m" value="1" />
          <button id="generateBtn" class="interactive-element">generate table</button>
        </div>
        
      </div>
    </div>
    
    <div class="section">
      
      <div class="colorbar">
        <div class="colorbar-controls">
          <div class="colorbar-title">fourier mode amplitude (log scale)</div>
          <select id="colormapSelect">
            <option value="bwr">bwr</option>
            <option value="viridis">viridis</option>
            <option value="plasma">plasma</option>
            <option value="turbo">turbo</option>
          </select>
        </div>
        <div class="colorbar-gradient" id="colorbarGradient"></div>
        <div class="colorbar-labels">
          <span>-15</span>
          <span>-1</span>
          <span>-0.1</span>
          <span>-0.001</span>
          <span>-0.0001</span>
          <span>0</span>
          <span>0.0001</span>
          <span>0.001</span>
          <span>0.1</span>
          <span>1</span>
          <span>15</span>
        </div>
      </div>
      
      <div id="tablesContainer"></div>
      
      <button id="generateModelBtn" class="generate-plot-btn">generate plot</button>
      
    </div>
    
    <div class="section">
      <div class="section-title">plot visualization</div>
      <div class="visualization-container" id="visualizationContainer">
      </div>
    </div>
    
    <div class="section">
      <div class="section-title">2d fourier mode visualization</div>
      <div id="tables2DContainer"></div>
    </div>
    
  </div>
  
  <script type="module" src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>